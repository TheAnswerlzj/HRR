@model Model.config_file_third_kindModel
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>third_kind_register</title>
    <link rel="stylesheet" href="../../css/table.css"
          type="text/css"></link>
    <script type="text/javascript"
            src="../../javascript/comm/comm.js">
    </script>
</head>
<body>
    <div id="div123"> 
@using (Ajax.BeginForm("third_kind_register", new AjaxOptions() { HttpMethod = "post" }))
{
            <table width="100%">
                <tr>
                    <td>
                        <font color="black">
                            您正在做的业务是：人力资源--客户化设置--人力资源档案管理设置--III级机构设置--III级机构添加
                        </font>
                    </td>
                </tr>
                <tr>
                    <td align="right">
                        <input type="submit" value="提交" class="BUTTON_STYLE1">
                        <input type="button" value="返回" class="BUTTON_STYLE1"
                               v-on:click="fh">
                    </td>
                </tr>
            </table>

            <table width="100%" border="1" cellpadding=0 cellspacing=1
                   bordercolorlight=#848284 bordercolordark=#eeeeee
                   class="TABLE_STYLE1">
                <tr>
                    <td width="19%" class="TD_STYLE1">
                        I级机构名称
                    </td>
                    <td width="81%" class="TD_STYLE2">
                        @*<select name="cftk.firstKindId" onchange="change1()" id="firstKindId" class="INPUT_STYLE1">
                            <option value="0">
                                请选择I机构名称
                            </option>

                            <option value="1353318953319">Ⅰ级结构</option>

                            <option value="1353318929919">集团</option>

                            <option value="1353318937391">总部</option>

                        </select>*@
                        @Html.DropDownList("first_kind_id", @ViewBag.dt as IEnumerable<SelectListItem>, "请选择I级机构名称...", new { @id = "firstKindId", @name = "cfsk.firstKindId" })


                    </td>
                </tr>
                <tr>
                    <td width="19%" class="TD_STYLE1">
                        II级机构名称
                    </td>
                    <td width="81%" class="TD_STYLE2" id="td1">
                        @*<select name="cftk.secondKindId" onchange="change2()" id="secondKindId" class="INPUT_STYLE1">
                            <option value="0">
                                请选择II机构名称
                            </option>

                        </select>*@
                        @*@Html.DropDownList("second_kind_id", @ViewBag.dt1 as IEnumerable<SelectListItem>, new { @id = "secondKindId", @name = "cfsk.firstKindId" })*@
                    </td>
                </tr>
                <tr>
                    <td width="19%" class="TD_STYLE1">
                        III级机构编号
                    </td>
                    <td width="81%" class="TD_STYLE2">
                        @Html.EditorFor(model => model.third_kind_id, new { htmlAttributes = new { @class = "INPUT_STYLE1", @readonly = true } })
                    </td>
                </tr>
                <tr>
                    <td class="TD_STYLE1">
                        III级机构名称
                    </td>
                    <td class="TD_STYLE2">
                        @*<input type="text" class="INPUT_STYLE1" name="cftk.thirdKindName" />*@
                        @Html.EditorFor(model => model.third_kind_name, new { htmlAttributes = new { @class = "INPUT_STYLE1" } })
                        @Html.ValidationMessageFor(model => model.third_kind_name,"", new { @class = "text-danger" })

                    </td>
                </tr>
                <tr>
                    <td class="TD_STYLE1">
                        销售责任人编号（多个编号之间请用"半角逗号"加"一个空格"隔开，如", "）
                    </td>
                    <td class="TD_STYLE2">
                        @*<textarea rows="4" cols="120" class="TEXTAREA_STYLE1" name="cftk.thirdKindSaleId"></textarea>*@
                        @Html.TextAreaFor(model => model.third_kind_sale_id, new { htmlAttributes = new { @class = "INPUT_STYLE1" }, @rows = "4" ,@cols = "120" })
                        @Html.ValidationMessageFor(model => model.third_kind_sale_id, "", new { @class = "text-danger" })
                    </td>
                </tr>
                <tr>
                    <td class="TD_STYLE1">
                        是否为零售店（是/否）
                    </td>
                    <td class="TD_STYLE2">
                        @*<select name="cftk.thirdKindIsRetail">
                            <option selected="selected">是</option>
                            <option>否</option>
                        </select>*@
                        @Html.DropDownList("third_kind_is_retail", @ViewBag.dt1 as IEnumerable<SelectListItem>, new { @id = "firstKindId", @name = "cfsk.firstKindId" })


                    </td>
                </tr>
            </table>
}
    </div>
</body>
</html>
<script src="~/Scripts/jquery-1.10.2.js"></script>
<script src="~/Scripts/jquery.validate.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.js"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
<script src="~/javascript/vue.js"></script>
<script type="text/javascript">
    var vm = new Vue({
        el: "#div123",
        data: {
            row1: null
        },
        methods: {
            fh: function () {
                window.location.href = "third_kind";
            },
        }, created: function () {

        }
    })

    $("#firstKindId").change(function () {
        var id = $("#firstKindId").val();
        $("#td1 .INPUT_STYLE1").remove();
        $.ajax({
            url: "/config_file_third_kind/third_kind_register2",
            type: "post",
            data: "id=" + id,
            success: function (msg) {
                var dt = eval("(" + msg + ")");
                for (var i = 0; i < dt.length; i++) {
                    var $select = $("<select name='cftk.secondKindId' id='secondKindId' class='INPUT_STYLE1'></select>");
                    var $option1 = $("<option value='0'>请选择I机构名称</option>")
                    var $option = $("<option value=" + dt[0]["second_kind_id"] + ">" + dt[0]["second_kind_name"] + "</option>");
                    $select.append($option1, $option);
                    $("#td1").append($select);
                }
            }
        })
    })
</script>